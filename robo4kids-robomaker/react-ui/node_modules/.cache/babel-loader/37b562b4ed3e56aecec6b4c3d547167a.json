{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _blockly = _interopRequireDefault(require(\"blockly\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function debouncedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n\n    var later = function later() {\n      timeout = null;\n      func.apply(context, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nvar BlocklyWorkspace = /*#__PURE__*/function (_React$Component) {\n  _inherits(BlocklyWorkspace, _React$Component);\n\n  var _super = _createSuper(BlocklyWorkspace);\n\n  function BlocklyWorkspace(props) {\n    var _this;\n\n    _classCallCheck(this, BlocklyWorkspace);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      // TODO figure out how to use setState here without breaking the toolbox when switching tabs\n      _this.state.workspace = _blockly.default.inject(_this.editorDiv, _objectSpread(_objectSpread({}, _this.props.workspaceConfiguration), {}, {\n        toolbox: _this.dummyToolbox\n      }));\n\n      if (_this.state.xml) {\n        if (_this.importFromXml(_this.state.xml)) {\n          _this.xmlDidChange();\n        } else {\n          _this.setState({\n            xml: null\n          }, _this.xmlDidChange);\n        }\n      }\n\n      _this.state.workspace.addChangeListener(_this.workspaceDidChange);\n\n      _this.state.workspace.addChangeListener(debounce(function () {\n        var newXml = _blockly.default.Xml.domToText(_blockly.default.Xml.workspaceToDom(_this.state.workspace));\n\n        if (newXml === _this.state.xml) {\n          return;\n        }\n\n        _this.setState({\n          xml: newXml\n        }, _this.xmlDidChange);\n      }, 200));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (newProps) {\n      if (_this.props.initialXml !== newProps.initialXml) {\n        _this.setState({\n          xml: newProps.initialXml\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldComponentUpdate\", function () {\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillUnmount\", function () {\n      if (_this.state.workspace) {\n        _this.state.workspace.dispose();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"importFromXml\", function (xml) {\n      try {\n        _blockly.default.Xml.domToWorkspace(_blockly.default.Xml.textToDom(xml), _this.state.workspace);\n\n        return true;\n      } catch (e) {\n        if (_this.props.onImportXmlError) {\n          _this.props.onImportXmlError(e);\n        }\n\n        return false;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"xmlDidChange\", function () {\n      if (_this.props.xmlDidChange) {\n        _this.props.xmlDidChange(_this.state.xml);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"workspaceDidChange\", function () {\n      if (_this.props.workspaceDidChange) {\n        _this.props.workspaceDidChange(_this.state.workspace);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toolboxDidUpdate\", function (toolboxNode) {\n      if (toolboxNode && _this.state.workspace) {\n        _this.state.workspace.updateToolbox(toolboxNode);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resize\", function () {\n      _blockly.default.svgResize(_this.state.workspace);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      // We have to fool Blockly into setting up a toolbox with categories initially;\n      // otherwise it will refuse to do so after we inject the real categories into it.\n      var dummyToolboxContent;\n\n      if (_this.props.toolboxMode === 'CATEGORIES') {\n        dummyToolboxContent = /*#__PURE__*/_react.default.createElement(\"category\", {\n          name: \"Dummy toolbox\",\n          colour: \"\",\n          is: \"div\"\n        });\n      }\n\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _this.props.wrapperDivClassName\n      }, /*#__PURE__*/_react.default.createElement(\"xml\", {\n        style: {\n          display: 'none'\n        },\n        ref: function ref(dummyToolbox) {\n          _this.dummyToolbox = dummyToolbox;\n        },\n        is: \"div\"\n      }, dummyToolboxContent), /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _this.props.wrapperDivClassName,\n        ref: function ref(editorDiv) {\n          _this.editorDiv = editorDiv;\n        }\n      }));\n    });\n\n    _this.state = {\n      workspace: null,\n      xml: _this.props.initialXml\n    };\n    return _this;\n  }\n\n  return BlocklyWorkspace;\n}(_react.default.Component);\n\n_defineProperty(BlocklyWorkspace, \"propTypes\", {\n  initialXml: _propTypes.default.string,\n  workspaceConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  wrapperDivClassName: _propTypes.default.string,\n  xmlDidChange: _propTypes.default.func,\n  workspaceDidChange: _propTypes.default.func,\n  onImportXmlError: _propTypes.default.func,\n  toolboxMode: _propTypes.default.oneOf(['CATEGORIES', 'BLOCKS'])\n});\n\n_defineProperty(BlocklyWorkspace, \"defaultProps\", {\n  initialXml: null,\n  workspaceConfiguration: null,\n  wrapperDivClassName: null,\n  xmlDidChange: null,\n  workspaceDidChange: null,\n  onImportXmlError: null,\n  toolboxMode: 'BLOCKS'\n});\n\nvar _default = BlocklyWorkspace;\nexports.default = _default;","map":{"version":3,"sources":["/Users/antonfu/Documents/Capstone Project/Robo4Kids/roboblockly/node_modules/react-blockly/dist/BlocklyWorkspace.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireDefault","require","_propTypes","_blockly","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","writable","configurable","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","call","e","Super","_getPrototypeOf","result","NewTarget","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","getPrototypeOf","debounce","func","wait","timeout","debouncedFunction","_len","args","Array","_key","context","later","clearTimeout","setTimeout","BlocklyWorkspace","_React$Component","_super","props","_this","state","workspace","inject","editorDiv","workspaceConfiguration","toolbox","dummyToolbox","xml","importFromXml","xmlDidChange","setState","addChangeListener","workspaceDidChange","newXml","Xml","domToText","workspaceToDom","newProps","initialXml","dispose","domToWorkspace","textToDom","onImportXmlError","toolboxNode","updateToolbox","svgResize","dummyToolboxContent","toolboxMode","createElement","name","colour","is","className","wrapperDivClassName","style","display","ref","Component","string","oneOf","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _blockly = _interopRequireDefault(require(\"blockly\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) {\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function debouncedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n\n    var later = function later() {\n      timeout = null;\n      func.apply(context, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nvar BlocklyWorkspace =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BlocklyWorkspace, _React$Component);\n\n  var _super = _createSuper(BlocklyWorkspace);\n\n  function BlocklyWorkspace(props) {\n    var _this;\n\n    _classCallCheck(this, BlocklyWorkspace);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      // TODO figure out how to use setState here without breaking the toolbox when switching tabs\n      _this.state.workspace = _blockly.default.inject(_this.editorDiv, _objectSpread(_objectSpread({}, _this.props.workspaceConfiguration), {}, {\n        toolbox: _this.dummyToolbox\n      }));\n\n      if (_this.state.xml) {\n        if (_this.importFromXml(_this.state.xml)) {\n          _this.xmlDidChange();\n        } else {\n          _this.setState({\n            xml: null\n          }, _this.xmlDidChange);\n        }\n      }\n\n      _this.state.workspace.addChangeListener(_this.workspaceDidChange);\n\n      _this.state.workspace.addChangeListener(debounce(function () {\n        var newXml = _blockly.default.Xml.domToText(_blockly.default.Xml.workspaceToDom(_this.state.workspace));\n\n        if (newXml === _this.state.xml) {\n          return;\n        }\n\n        _this.setState({\n          xml: newXml\n        }, _this.xmlDidChange);\n      }, 200));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (newProps) {\n      if (_this.props.initialXml !== newProps.initialXml) {\n        _this.setState({\n          xml: newProps.initialXml\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldComponentUpdate\", function () {\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillUnmount\", function () {\n      if (_this.state.workspace) {\n        _this.state.workspace.dispose();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"importFromXml\", function (xml) {\n      try {\n        _blockly.default.Xml.domToWorkspace(_blockly.default.Xml.textToDom(xml), _this.state.workspace);\n\n        return true;\n      } catch (e) {\n        if (_this.props.onImportXmlError) {\n          _this.props.onImportXmlError(e);\n        }\n\n        return false;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"xmlDidChange\", function () {\n      if (_this.props.xmlDidChange) {\n        _this.props.xmlDidChange(_this.state.xml);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"workspaceDidChange\", function () {\n      if (_this.props.workspaceDidChange) {\n        _this.props.workspaceDidChange(_this.state.workspace);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toolboxDidUpdate\", function (toolboxNode) {\n      if (toolboxNode && _this.state.workspace) {\n        _this.state.workspace.updateToolbox(toolboxNode);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resize\", function () {\n      _blockly.default.svgResize(_this.state.workspace);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      // We have to fool Blockly into setting up a toolbox with categories initially;\n      // otherwise it will refuse to do so after we inject the real categories into it.\n      var dummyToolboxContent;\n\n      if (_this.props.toolboxMode === 'CATEGORIES') {\n        dummyToolboxContent =\n        /*#__PURE__*/\n        _react.default.createElement(\"category\", {\n          name: \"Dummy toolbox\",\n          colour: \"\",\n          is: \"div\"\n        });\n      }\n\n      return (\n        /*#__PURE__*/\n        _react.default.createElement(\"div\", {\n          className: _this.props.wrapperDivClassName\n        },\n        /*#__PURE__*/\n        _react.default.createElement(\"xml\", {\n          style: {\n            display: 'none'\n          },\n          ref: function ref(dummyToolbox) {\n            _this.dummyToolbox = dummyToolbox;\n          },\n          is: \"div\"\n        }, dummyToolboxContent),\n        /*#__PURE__*/\n        _react.default.createElement(\"div\", {\n          className: _this.props.wrapperDivClassName,\n          ref: function ref(editorDiv) {\n            _this.editorDiv = editorDiv;\n          }\n        }))\n      );\n    });\n\n    _this.state = {\n      workspace: null,\n      xml: _this.props.initialXml\n    };\n    return _this;\n  }\n\n  return BlocklyWorkspace;\n}(_react.default.Component);\n\n_defineProperty(BlocklyWorkspace, \"propTypes\", {\n  initialXml: _propTypes.default.string,\n  workspaceConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  wrapperDivClassName: _propTypes.default.string,\n  xmlDidChange: _propTypes.default.func,\n  workspaceDidChange: _propTypes.default.func,\n  onImportXmlError: _propTypes.default.func,\n  toolboxMode: _propTypes.default.oneOf(['CATEGORIES', 'BLOCKS'])\n});\n\n_defineProperty(BlocklyWorkspace, \"defaultProps\", {\n  initialXml: null,\n  workspaceConfiguration: null,\n  wrapperDivClassName: null,\n  xmlDidChange: null,\n  workspaceDidChange: null,\n  onImportXmlError: null,\n  toolboxMode: 'BLOCKS'\n});\n\nvar _default = BlocklyWorkspace;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}